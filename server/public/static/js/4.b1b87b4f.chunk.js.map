{"version":3,"sources":["components/shared/Button.js","components/Posts/Post.js","components/Posts/PostList.js","pages/User.js"],"names":["Button","props","Abutton","styled","button","type","onClick","children","Box","div","Info","Content","Textarea","textarea","LinkA","Link","Post","auth","useContext","AuthContext","useState","data","content","setContent","isEdit","setEdit","editedContent","setEditedContent","to","ownerUserid","ownerName","date","_id","owner_id","Fragment","className","window","confirm","axios","delete","process","headers","Authorization","token","then","location","reload","catch","res","alert","response","error","value","onChange","e","target","patch","PostList","map","item","key","User","postList","user","setUser","posts","setPosts","userid","useParams","useEffect","get","name","length"],"mappings":"mWAqBeA,IAlBA,SAAAC,GACb,IAAMC,EAAUC,IAAOC,OAAV,KASb,OAAQ,kBAACF,EAAD,CACRG,KAAMJ,EAAMI,KACZC,QAASL,EAAMK,SAEZL,EAAMM,Y,26BCTX,IAkEMC,EAAML,IAAOM,IAAV,IAIL,IAMEC,EAAOP,IAAOM,IAAV,IAGN,GAME,IAIAE,EAAUR,IAAOM,IAAV,KAOPG,EAAWT,IAAOU,SAAV,KAGRC,EAAQX,YAAOY,IAAPZ,CAAH,KAIIa,EAvGF,SAACf,GACZ,IAAMgB,EAAOC,qBAAWC,KADF,EAEQC,mBAASnB,EAAMoB,KAAKC,SAF5B,mBAEfA,EAFe,KAENC,EAFM,OAGIH,oBAAS,GAHb,mBAGfI,EAHe,KAGPC,EAHO,OAIoBL,mBAAS,IAJ7B,mBAIfM,EAJe,KAIAC,EAJA,KAsCtB,OACE,kBAACnB,EAAD,KACE,kBAACE,EAAD,KACE,kBAACI,EAAD,CAAOc,GAAE,gBAAW3B,EAAMoB,KAAKQ,cAAe,4BAAK5B,EAAMoB,KAAKS,YAC9D,2BAAI7B,EAAMoB,KAAKU,MACdd,EAAKe,MAAQ/B,EAAMoB,KAAKY,UACvB,kBAAC,IAAMC,SAAP,KACE,uBAAGC,UAAU,eAAe7B,QAvCrB,WACfqB,EAAiB1B,EAAMoB,KAAKC,SAC5BG,GAAQ,MAoCF,mBAGE,uBAAGU,UAAU,gBAAgB7B,QApCpB,WACb8B,OAAOC,QAAQ,oBACjBC,IACGC,OAAOC,kCAAmDvC,EAAMoB,KAAKW,IAAK,CACzES,QAAS,CACTC,cAAe,UAAYzB,EAAK0B,SAEjCC,MAAK,kBAAMR,OAAOS,SAASC,QAAO,MAClCC,OAAM,SAAAC,GAAG,OAAIC,MAAMD,EAAIE,SAAS7B,KAAK8B,gBAgCtC3B,GAAU,kBAACb,EAAD,KAAUW,GACrBE,GACC,kBAACb,EAAD,KACE,kBAACC,EAAD,CACEwC,MAAO1B,EACP2B,SAAU,SAACC,GAAD,OAAO3B,EAAiB2B,EAAEC,OAAOH,UAE7C,kBAACpD,EAAA,EAAD,CAAQM,QAnCC,WACfgC,IACGkB,MAAMhB,kCAAmDvC,EAAMoB,KAAKW,IAAK,CACxEV,QAASI,GACR,CACDe,QAAS,CACTC,cAAe,UAAYzB,EAAK0B,SAEjCC,MAAK,SAACI,GACL/C,EAAMoB,KAAKC,QAAUI,EACrBH,EAAWG,MACVqB,OAAM,SAAAC,GAAG,OAAIC,MAAMD,EAAIE,SAAS7B,KAAK8B,UAC1C1B,GAAQ,KAuBF,QACA,kBAACzB,EAAA,EAAD,CAAQM,QAAS,kBAAMmB,GAAQ,KAA/B,aCrDKgC,IAXE,SAAAxD,GACf,OAAKA,EAAMoB,KAGJpB,EAAMoB,KAAKqC,KAAI,SAAAC,GAAI,OAC1B,kBAAC,EAAD,CACEtC,KAAMsC,EACNC,IAAKD,EAAK3B,SALH,yC,0GCqCI6B,UAnCF,SAAA5D,GACEiB,qBAAWC,KAAxB,IAeI2C,EAhBgB,EAEI1C,qBAFJ,mBAEb2C,EAFa,KAEPC,EAFO,OAGM5C,qBAHN,mBAGb6C,EAHa,KAGNC,EAHM,KAKZC,EAAWC,cAAXD,OAkBR,OAhBAE,qBAAU,WACR/B,IAAMgC,IAAI9B,kCAAmD2B,GAC5DvB,MAAK,SAAAI,GACJkB,EAASlB,EAAI3B,KAAK4C,OAClBD,EAAQhB,EAAI3B,KAAK0C,WAGlB,IAMDD,EAHGG,EAGQ,kBAAC,IAAD,CAAU5C,KAAM4C,IAFhB,8CAMX,kBAAC,IAAM/B,SAAP,KACG6B,GAAQ,6BACP,4BAAKA,EAAKQ,MACV,gCAAMR,EAAKI,QACX,wCAAcF,EAAMO,OAApB,YAEDV","file":"static/js/4.b1b87b4f.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Button = props => {\r\n  const Abutton = styled.button`\r\n    padding: 1em;\r\n    margin: 0.5em auto;\r\n    border-radius: 5px;\r\n    border: 1px solid salmon;\r\n    background-color: white;\r\n    font-size: 1em;\r\n  `\r\n\r\n  return (<Abutton\r\n  type={props.type}\r\n  onClick={props.onClick}\r\n  >\r\n    {props.children}\r\n  </Abutton>);\r\n}\r\n\r\nexport default Button;","import React, { useState, useContext } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\n\r\nimport { AuthContext } from \"../../utils/AuthContext\";\r\nimport Button from \"../shared/Button\";\r\n\r\nconst Post = (props) => {\r\n  const auth = useContext(AuthContext);\r\n  const [content, setContent] = useState(props.data.content);\r\n  const [isEdit, setEdit] = useState(false);\r\n  const [editedContent, setEditedContent] = useState(\"\");\r\n\r\n  const editPost = () => {\r\n    setEditedContent(props.data.content);\r\n    setEdit(true);\r\n  };\r\n\r\n  const deletePost = () => {\r\n    if (window.confirm(\"Sure to delete?\")) {\r\n      axios\r\n        .delete(process.env.REACT_APP_BACKEND_URL + \"/api/post/\" + props.data._id, {\r\n          headers: {\r\n          Authorization: 'Bearer ' + auth.token\r\n        }})\r\n        .then(() => window.location.reload(false))\r\n        .catch(res => alert(res.response.data.error))\r\n    }\r\n  };\r\n  \r\n  const saveEdit = () => {\r\n    axios\r\n      .patch(process.env.REACT_APP_BACKEND_URL + \"/api/post/\" + props.data._id, {\r\n        content: editedContent\r\n      }, {\r\n        headers: {\r\n        Authorization: 'Bearer ' + auth.token\r\n      }})\r\n      .then((res) => {\r\n        props.data.content = editedContent;\r\n        setContent(editedContent);\r\n      }).catch(res => alert(res.response.data.error))\r\n    setEdit(false);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Info>\r\n        <LinkA to={`/user/${props.data.ownerUserid}`}><h3>{props.data.ownerName}</h3></LinkA>\r\n        <p>{props.data.date}</p>\r\n        {auth._id === props.data.owner_id && (\r\n          <React.Fragment>\r\n            <i className=\"fa fa-pencil\" onClick={editPost}></i>\r\n            &nbsp;&nbsp;&nbsp;&nbsp;\r\n            <i className=\"fa fa-trash-o\" onClick={deletePost}></i>\r\n          </React.Fragment>\r\n        )}\r\n      </Info>\r\n      {!isEdit && <Content>{content}</Content>}\r\n      {isEdit && (\r\n        <Content>\r\n          <Textarea\r\n            value={editedContent}\r\n            onChange={(e) => setEditedContent(e.target.value)}\r\n          />\r\n          <Button onClick={saveEdit}>Save</Button>\r\n          <Button onClick={() => setEdit(false)}>Cancel</Button>\r\n        </Content>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst Box = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 2em;\r\n  ${\"\" /* border: 1px solid silver; */}\r\n  @media (min-width: 768px) {\r\n    flex-direction: row;\r\n    margin: 4em 0;\r\n  }\r\n`;\r\nconst Info = styled.div`\r\n  margin: 0 1em;\r\n  padding: 0 1em;\r\n  ${\"\" /* display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: flex-end; */}\r\n  @media (min-width: 768px) {\r\n    min-width: 150px;\r\n    ${\"\" /* flex-direction: column;  */}\r\n    text-align: right;\r\n  }\r\n`;\r\nconst Content = styled.div`\r\n  display: flex;\r\n  margin: 0 1em;\r\n  padding: 0.5em 1em;\r\n  align-items: center;\r\n  border-left: 2px dashed salmon;\r\n`;\r\nconst Textarea = styled.textarea`\r\n  width: 100%;\r\n`;\r\nconst LinkA = styled(Link)`\r\n  color: black;\r\n  text-decoration: none;\r\n`\r\nexport default Post;\r\n","import React from 'react';\r\nimport Post from './Post';\r\n\r\nconst PostList = props => {\r\n  if (!props.data) {\r\n    return <p>No posts</p>\r\n  }\r\n  return props.data.map(item => (\r\n  <Post \r\n    data={item} \r\n    key={item._id}\r\n   />));\r\n}\r\n\r\nexport default PostList;","import React, { useContext, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport PostList from '../components/Posts/PostList';\r\nimport { AuthContext } from '../utils/AuthContext';\r\n\r\nconst User = props => {\r\n  const auth = useContext(AuthContext);\r\n  const [user, setUser] = useState();\r\n  const [posts, setPosts] = useState();\r\n\r\n  const { userid } = useParams();\r\n\r\n  useEffect(() => {\r\n    axios.get(process.env.REACT_APP_BACKEND_URL + '/api/user/' + userid)\r\n    .then(res => {\r\n      setPosts(res.data.posts)\r\n      setUser(res.data.user)\r\n    })\r\n    \r\n  }, [])\r\n  \r\n  let postList;\r\n  if (!posts) {\r\n    postList = <div>Loading . . .</div>\r\n  } else {\r\n    postList = <PostList data={posts}/>\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {user && <div>\r\n        <h2>{user.name}</h2>\r\n        <h3>@{user.userid}</h3>\r\n        <h4>Total of {posts.length} posts.</h4>\r\n      </div> }\r\n      {postList}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default User;"],"sourceRoot":""}